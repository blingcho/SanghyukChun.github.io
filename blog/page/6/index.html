
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>README</title>
  <meta name="author" content="Sanghyuk Chun">

  
  <meta name="description" content="Machine Learning Week2 - Linear Regression Aug 4th, 2013 | Comments Coursera강의를 들은지 한참이 지난 줄 알았는데 고작 1주일 밖에 되지 않았다. 아무튼 까먹기 전에 처음 얘기했던대로 하나하나 차근차근 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://SanghyukChun.github.io/blog/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/layout480.css" media="only screen and (max-width : 500px)" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="README" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
	<script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/bootstrap.js" type="text/javascript"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">



<script>
$(function() {
	$('.tip').attr('data-toggle','tooltip');
	$('.tip').attr('data-placement','top');
	$('.tip').tooltip();
});
</script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42711199-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  
  <div id="main">
  	<header role="banner"><hgroup>
  <h1><a id="blog-title" href="/">README</a>
  
    <span>&nbsp;&nbsp; SanghyukChun's Blog</span>
  
  </h1>
</hgroup>

</header>
  	<nav role="navigation"><ul class="main-navigation list-inline">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="http://sanghyuk.kaist.ac.kr/aboutMe/">About Me</a></li>
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>

</nav>
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/14/">Machine Learning Week2 - Linear Regression</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-08-04T15:19:00+09:00" pubdate data-updated="true">Aug 4<span>th</span>, 2013</time>
        
         | <a href="/14/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Coursera강의를 들은지 한참이 지난 줄 알았는데 고작 1주일 밖에 되지 않았다. 아무튼 까먹기 전에 <a href="/3">처음 얘기했던대로</a> 하나하나 차근차근 블로그에 정리를 해볼까 한다.</p>


<h3 id="Linear_Regression">Linear Regression</h3>


<p><a href="/3">지난 Post</a>에서는 간단하게 supervise learning과 unsupervise learning에 대해서 언급했다. 이제 supervise learning 중 linear regression에 대해서 얘기를 해보자. 개인적으로는 regression을 하기 이전에 baysian을 설명하는 것을 선호하지만, 그건 그냥 다음 포스트에 설명하기로 하고 (Andrew Ng 교수는 Coursera강의에서 Baysian을 따로 수업으로 다루지 않았다.) 먼저 regression부터 살펴보자.</p>


<p>Linear regression을 가장 간단하게 설명하자면 Excel의 추세선과 거의 비슷한 개념이라고 생각하면 된다. 즉, 지금 내가 가지고 있는 데이터셋이 어떤 <strong>Linear function</strong>인지를 유추하는 것이다. 간단한 예시를 보자. 아래 그래프를 공부시간과 시험성적의 그래프라고 생각해보자. (가로축을 공부 시간 세로축을 시험성적)</p>


<p><img src="/images/post/14-1.png" width="400"></p>

<p>이 그래프는 대체로 1차 함수(linear function)의 꼴을 가지고 있다는 것을 알 수 있다. 그렇다면 아마도 4.5의 공부 시간을 투자한 학생은 약 4.5 정도의 시험성적을 받을 것이라고 예측할 수 있지 않을까?</p>


<p>물론 현실에서 공부 시간과 성적이 선형 비례하지는 않지만, 아무튼 이런 예시를 통해서 우리는 이 System이 가지고 있는 일종의 특성을 예측할 수 있다. 이때 우리가 &#8216;데이터가 x일 때 y의 결과가 나올 것이다&#8217; 라고 예측한 둘 사이의 관계 혹은 함수를 hypothesis라 한다. 이 부분은 지난 포스트에서 설명한 부분이니 자세한 설명은 넘어가도록 하겠다. 그렇다면 특정 데이터셋이 들어왔을 때 hypothesis는 어떻게 도출할 수 있을까? 아래 그래프를 보자</p>


<p><img src="/images/post/14-2.png" width="400"></p>

<p>빨간 선과 초록 선 중 어느 hypothesis가 더 좋다고 할 수 있을까? 사람이 선택하는 것은 언제나 부정확하다. 때문에 우리는 수식적으로, 정확하게 scoring할 수 있는 무언가를 원하는데 그 이유로 우리는 <a class="red tip" title="Cost Function이라고도 한다. 본 블로그는 전부 Loss Function으로 칭한다.">Loss Function</a>을 필요로 한다.</p>


<h3 id="Loss_Function">Loss Function</h3>


<p>이 hypothesis가 좋은 hypothesis인지 아닌지 어떻게 알 수 있을까? 사실 답은 간단하다. &#8216;새로운 데이터의 결과를 얼마나 잘 예측을 하느냐&#8217;. 하지만 새로운 데이터가 없이는 Scoring이 불가능하다. (온전히 불가능한 것은 아니고 model selection을 통해 validation을 하는 skill이 있다. 하지만 지금 포스트의 주제는 아니기 때문에 나중에 설명하도록 하겠다.) 때문에 지금 존재하고 있는 데이터에서 찾은 패턴이 전체 패턴과 동일하다는 가정하에 지금 데이터에 얼마나 잘 fit하느냐로 Scoring을 하는 것이 가능할 것이다. 즉, 새로운 데이터를 이용하여 Scoring을 해야하지만, 새로운 데이터를 받기 이전에 Scoring을 하고 그 hypothesis를 사용해야하기 때문에 지금 가지고 있는 dataset이 향후 새로 들어올 데이터와 유사하다고 생각하고 지금 가지고 있는 값을 이용해 fitting을 하는 것이다.</p>


<p>이때 사용하는 것이 바로 Loss function이다. Hypothesis의 Loss를 측정하여 그 값을 최소화 하는 것이다. Loss 혹은 Cost라는 이름에서 유추할 수 있듯 이 값은 function으로 예측된 (predicted) 값과 측정된 (observed) 값의 차이를 사용하여 계산한 값이다. 여러가지 Loss function의 꼴이 있는데, 가장 간단하게 사용할 수 있는 function은 (data_p - data_o)^2이다. data_p는 이 hypothesis를 사용하여 예측한 값이고 data_o는 실제 관측 결과 얻은 값이다. 그 밖에 0-1 Loss라고 해서 값이 정확하게 일치하면 0, 아니라면 1 만큼의 Loss를 가지는 매우 Strict한 Loss function이다. 이후에 설명하게 될 classfication에서 간혹 쓰인다.</p>


<h3 id="Gradient_Descent">Gradient Descent</h3>


<p>이제 이 Loss function이 가장 작은 값을 가지는 hypothesis를 선택하면 된다. 그렇다면 그 값은 어떻게 찾을 것인가? 여러가지 방법이 있지만, 일반적으로는 Gradient Desent라는 방법을 사용한다. Gradient descent란 쉽게 생각하면 긿을 잃은 상태에서 산을 내려가는 방법이라고 생각하면 된다. 산을 가장 빠르게 내려가기 위해서는 아마 현재 내가 서있는 지점에서 가장 경사가 가파른 지점을 향해서 내려가고, 움직인 위치에서 다시 한번 경사가 가장 가파른 지점을 향해서 내려가고.. 이 과정을 반복하다보면 언젠가 가장 낮은 지점으로 이동할 수 있을 것이다. 이제 이 개념을 머리에 넣어두고 아래 그림을 보자.</p>


<p><img src="http://www.mathworks.com/matlabcentral/fx_files/27631/1/fff.png"></p>

<p><small>출처: http://www.mathworks.com/matlabcentral/fx_files/27631/1/fff.png</small></p>


<p>위의 그림에서 볼 수 있듯 가장 경사가 가파른 지점을 따라 내려 걸어가다보면 가장 낮은 지점으로 도달할 수 있을 것이다. 그런데 여기에서 문제가 하나 발생한다. 만약에 Initial Condition이 작은 봉우리가 아니라 반대쪽 높은 봉우리였다면? 그렇다면 우리는 아마 Global minimum, 즉 전체에서 가장 낮은 지점이 아닌 Local minimum, 즉 주변에서 가장 낮은 지점으로 이동하게 될 것이다. 전체에서 가장 작은 값과 그 주변에서 가장 작은 값을 선택하는 것은 분명 큰 차이가 있다. 하지만 이런 단점에도 불구하고 gradient descent는 매우 많이 쓰이는 방법 중 하나이다. 그 이유는 (1) 구현이 쉽고, (2) 모든 차원 및 공간으로 확대가 가능하다 라는 이유가 있다. Gradient descent는 또한 내가 속도를 조절할 수 있다. 산을 내려갈 때 얼마나 움직인 다음 방향을 바꿀 것인가에 따라 수렴 속도가 급격하게 변한다. 너무 그 폭이 작으면 시간이 너무 오래걸리고, 폭이 너무 크면 최악의 경우에 한 지점에 수렴하지 못할 수도 있다. 그 뿐 아니라 <a class="red tip" title="가장 간단한 예로 y=x만 생각해봐도 절대 수렴하지 않는다.">경우에 따라서는 gradient descent가 끝이 나지 않을 수도 있다.</a> 하지만 여러 방법으로 그 단점들을 보완할 수 있고 무엇보다 아래 코드에서도 확인할 수 있듯 구현이 너무 간단하기 때문에 상당히 많이 쓰이는 방법이다. 더 자세한 것은 <a href="http://en.wikipedia.org/wiki/Gradient_descent">Wikipedia page</a>를 참고하면 좋은 정보가 많다.</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># From calculation, we expect that the local minimum occurs at x=9/4
</span><span class='line'> 
</span><span class='line'>x_old = 0
</span><span class='line'>x_new = 6 # The algorithm starts at x=6
</span><span class='line'>eps = 0.01 # step size
</span><span class='line'>precision = 0.00001
</span><span class='line'> 
</span><span class='line'>def f_prime(x):
</span><span class='line'>    return 4 * x**3 - 9 * x**2
</span><span class='line'> 
</span><span class='line'>while abs(x_new - x_old) &gt; precision:
</span><span class='line'>    x_old = x_new
</span><span class='line'>    x_new = x_old - eps * f_prime(x_old)
</span><span class='line'>print "Local minimum occurs at ", x_new</span></code></pre></td></tr></table></div></figure>


<p><small>출처: http://en.wikipedia.org/wiki/Gradient_descent#A_computational_example</small></p>


<h3 id="Overfitting">Overfitting</h3>


<p>이제 적절한 hypothesis를 찾기 위하여 loss function의 최소점을 gradient descent로 찾을 수 있다. 이제 더 이상 우리가 고민할 것은 없어보인다. 아니, 사실 그렇지 않다. 앞서 가정한 바에 의하면, 우리는 지금 존재하는 데이터셋이 전체 데이터셋의 분포를 대변한다고 가정했다. 하지만 꼭 그러리라는 보장을 할 수 있을까? 당연히 없다. 우리가 보고 있는 자료가 엄청 큰 패턴 중에서 매우 일부의 예외일 수도 있고, 혹은 노이즈 때문에, 너무 샘플 수가 적어서 잘못된 방향으로 pattern을 찾게 될 수도 있다. 이런 경우를 일컬어 Overfitting이라고 한다. 즉, 기존의 데이터에만 너무 충실해서 새로운 데이터가 들어왔을 때 도저히 써먹을 수가 없는 상태를 일컬어 Overfitting이라 한다. 이 것을 해결하기 위하여 여러가지 방법이 있는데 Model Selection과 Regularization이 그것이다. 이에 대해서는 다음 포스트에서 다루고자 한다.</p>


<p></p>

<p>Linear Regression은 매우 간단한 supervise learning의 예시이지만 상당히 중요한 개념들에 대해서 많이 다뤄야 한다. 특히 Loss function은 정말 중요하고 그 Loss function을 계산하는 gradient descent도 너무 중요하고, 마지막에 잠시 언급한 Overfitting은 너무 중요하다 못해 머리가 아플 정도다. 아직 정말 중요한 부분들을 일부 설명 못했지만 Overfitting에서 할 얘기가 너무 많아서 이쯤에서 줄여야겠다.</p>


<hr>


<h4>참고도서</h4>


<p>Bishop, Pattern Recognition and Machine Learning</p>


<p>Simon Rogers, A First Course in Machine Learning</p>


<p></p>

<p>Stephen Marsland, Machine Learning: An Algorithmic Perspective</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/13/">2013.8.1</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-08-01T19:51:00+09:00" pubdate data-updated="true">Aug 1<span>st</span>, 2013</time>
        
         | <a href="/13/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;마음이 콩밭에 가있다.&#8221; 근래에 자주 듣는 표현 중 하나이다. 내가 그 얘기를 듣는 대상은 아니라는점이 아직은 다행이지만. 아무튼 오늘은 하루 종일 마음이 콩밭, 정확히는 자취에 마음이 가버려서 집중을 하기 너무 힘들었다. 여러모로 집중하기에는 최악의 조건들만 잔뜩있는 기분이라 일과시간에도 그 이후에도 집중력있게 집중력을 유지하면서 무언가를 한다는 것이 정말 어렵게 느껴진다. 해야하는 일은 정말정말 많은데 나는 그 일 중 얼마나 많은 일을 해내고 있는 것일까</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/12/">2013.7.31</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-31T17:02:00+09:00" pubdate data-updated="true">Jul 31<span>st</span>, 2013</time>
        
         | <a href="/12/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>나를 괴롭히던 문제의 원인을 알아냈다. 알 수 없는 이유로 컴퓨터의 파티션이 바뀌어서 sda가 아니라 sdb에 root가 mount되어 있었다. 뭐 이유는 도저히 이해가 안가지만 지금이라도 알아내서 다행이라는 생각이 든다.</p>


<p>내가 뭔가 contribution을 할 수 있는 일을 해야겠다는 생각이 많이 든다. 지금 하는 일은 내가 과연 얼마나 contribution을 할 수 있을지 솔직히 자신이 없다.. 어제 했던 대화들을 생각해보면 나는 이 곳에서 행복하게 지낼 수 없을 것 같다는 그런 생각이 든다. 하지만 일단은 내가 해야할 일에 집중하는 것이 우선이므로 그런 고민들은 잠시 잊고 있어야지. 이제 내일이면 벌써 8월이라는 사실을 잊으면 안된다.</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/11/">2013.07.30</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-30T19:47:00+09:00" pubdate data-updated="true">Jul 30<span>th</span>, 2013</time>
        
         | <a href="/11/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>어제 설정 스크립트를 변경했다가 거의 반나절을 소모했다. 내가 만든 시스템이 아니라면 가급적 건드리지 말아야한다는 사실을 깜빡하고 너무나 과감하게 내가 잘 알지도 못하는 시스템레벨을 변경해버린 것이 화근이었다. 다른 작업을 먼저 끝내고 오늘 다시 살펴보니, 코드 문제는 역시 아니었고 내가 바꾼 스크립트 때문인지 아닌지는 몰라도 하드가 잘못 잡혀있었다. 지금 프로그램은 하드 24개를 설정하는 스크립트가 있는데 이유는 알 수 없지만 sda와 sdb가 바뀌어있어 (라고 추정하고 있어) sdb1에 설정이 잡혀 용량이 부족해 에러가 난 것이었다. 이해할 수 없는 것은 도대체 어째서 sda에 있던 파티션이 sdb가 되었냐는 점. 납득은 안되지만 어쨌든 원인은 알았으니 고치면 된다. 하지만 내가 고치지 말고 왜 이런 이유가 났는지 보고만 해도 충분하겠지.</p>


<p>요즘 무기력하고 우울하다. 내가 도대체 왜 이걸 하고 있고 도대체 뭘 하고 있는건지 모르겠다. 내가 하려는 것은 다른 일인데 이 곳에서 이러고 있는 것이 과연 나를 위한 일인가? 난 잘 모르겠다. 그리고 내가 하려는 일도 과연 나에게 잘 맞는 일일 것이라고 자신할 수 있을까? 역시 잘 모르겠다. 혼란스럽기만 하다. 하지만 페르시아의 왕자를 만든 조던 마크너도 모든 성공을 가진 것처럼 보이는 순간에도 계속 고민하고 힘들어했다. 모두 다 자연스러운 일이겠지.</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/10/">Andrew Ng 교수의 Machine Learning강의 수강 완료</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-29T08:11:00+09:00" pubdate data-updated="true">Jul 29<span>th</span>, 2013</time>
        
         | <a href="/10/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>기어코 주말만에 Coursera하나를 끝냈다. 물론 어디까지나 다 아는 내용이었고 강의 난이도도 낮아서 빠르게 스킵하면서 넘어갔기 때문에 가능했던 일이지만.</p>


<p>이 강의를 들으면서 요약을 하면서 천천히 진행하려고 했는데 생각보다 강의 내용도 쉽고 다루는 내용도 상당히 기초적인 것들이 많아서 차라리 빠르게 훑고 뒷 쪽의 Advanced를 보면서 다시 개념 다지는게 좋겠다는 생각으로 질주했으나, 끝까지 난이도가 쉬웠다. 악의가 있는 말은 아니고, 정말 설명도 잘하고 예시도 쉬운 것들이라 금방금방 넘어갈 수 있었다. 결국 19.6시간짜리 강의를 이틀 + 반나절만에 돌파하는 기염을 토하게 되었다 ;;</p>


<p>근데 아무래도 아는 내용들이 주가 되다보니 그냥 비디오를 스킵하면서 강의 하나보는데 5분도 안걸리는 식으로 훑으면서 봤더니 온전하게 소화가 되지 않은 기분이다. 전공서 다시 읽으면서 개념 정리하고 강의 순서대로 나름대로 정리하면서 포스팅을 해봐야겠다. 아쉬운 점이라면 너무 수학적인 내용이 없다보니 (Baysian조차 나오지 않은 것은 나름 신선한 충격이었다.) 아마 내가 공부하는 내용을 바탕으로 정리하면 꽤나 안드로메다로 갈 것 같은 기분이 허허허</p>


<p>Hinton 교수의 Neural Network강의는 다음주쯤부터 시작하고 그 전에는 전공서를 다시 읽어봐야겠다. 한 학기동안 배운 것도 정리하겸. 사실 우리 교수님 강의 순서가 책이랑 달라서 책 공부에 소홀해진 것도 있으니.. 이번 주에는 조금 여유가 있을 듯 하니 이럴 때 좀 열심히 해놔야겠다.</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/9/">2013.07.28</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-29T04:20:00+09:00" pubdate data-updated="true">Jul 29<span>th</span>, 2013</time>
        
         | <a href="/9/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>주말이라고 열심히 자기만 하다가 갑자기 막판에 조금 꽂혀서 코딩을 조금 했다. About Me 프로젝트 코딩을 좀 했는데, 개인적으로 github pages를 헤메는 바람에 branch가 살짝 꼬인게 아쉽다. 크게 신경 쓸 부분은 아니지만. 일단 그제 나온 Bootstrap 3을 추가 적용시키고 소소한 markup수정, 내부 컨텐츠 수정을 좀 했다. About Me는 급하게 만든 프로젝트라고는 믿기지 않을 정도로 더 크게 손 댈 것이 없다. 물론 아예 없는 것은 아니지만 그래도 이 상태에서 굳이 Markup을 뜯어고친다거나 css를 크게 고친다거나 (물론 오늘은 bootstrap을 붙이긴 했지만) 성능이 아주 크게 추가되거나 (역시 오늘 bootstrap carousel을 추가시켰지만) 할 건 없는 것 같다. 다만 문제는 컨텐츠인데, 솔직히 내용을 채우기에는 내가 쌓아온 것들이 너무 적어서 뭔가 적을게 많이 없다는 점이 안타깝다. Works를 만들 때 가장 그런 생각을 많이 했는데, 그냥 열심히 하는 것 밖에 답이 없는 것 같다.</p>


<p>블로그는 조만간 더 뜯어고칠거다. 지금은 그래도 대충 모양새는 잡아놨으니 더 세세한 부분을 건드리지는 않을거지만.. 일단 facebook plugin을 붙이는 순간 머리가 지끈지끈해진다. 한번 완성만 시키면 크게 손 댈 필요없다는 장점이 있다고는 하지만 그래도 귀찮은걸 어떻게 해 ㅎㅎ.. 블로그는 대충 래퍼런스 잡고 어떻게 해야할지 감은 잡았으니 시간날 때마다 틈틈히 고치면 될 것 같다.</p>


<p></p>

<p>머신러닝 공부는 역시 느리다. 아는 부분이라고 대충대충 넘어가고 결국 머리에도 많이 남지 않는 것 같아서 안타깝다. 조만간 Matlab으로 코딩을 시작해야겠다.</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/8/">2013.07.27</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-28T02:36:00+09:00" pubdate data-updated="true">Jul 28<span>th</span>, 2013</time>
        
         | <a href="/8/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>저번 주에는 <a href="http://sanghyukchun.github.io/aboutMe/">AboutMe</a>에 매진하고 이번 주말에는 내내 블로그를 작업하는 데에 몰두한 것 같다. -프로그래밍은 재미있는 것이다.- 라는 말은 어디까지나 내가 감당할 수 있고 내가 어떻게 할 수 있을지 가늠할 수 있을 때 어울리는 말이 아닐까. 앞으로 내가 나아갈 방향에서 그렇지 않은 프로그래밍이 참 많을텐데 내가 계속 프로그래밍을 하는 것이 맞을까라는 생각이 든다.</p>


<p>Octopress로 블로그를 만든 것을 살짝 후회하고 있다. 편하게 고치려고 가져온건데 오히려 바닥부터 뜯어고쳐야하는게 많다보니 차라리 처음부터 지킬로 작업하는 것 보다 느린 것 같다. 하지만 일단 커스터마이징만 끝나면 deploy, preview 심지어 new post까지 전부 스크립트로 걸어놨으니 오히려 더 빠르게 진행될 수 있겠지</p>


<p>머신러닝 공부 속도는 더디지만 (오늘은 7강까지 밖에 못들었다.) 그래도 얼른 끝내야 내 프로젝트를 진행하고 neural network 강의 등으로 넘어가서 내 자신에 대한 발전이 있을 텐데 자꾸 더디다. 아직까지는 전부 아는 내용이라 사실 정말 빠르게 다 보고 슥슥 넘겨도 괜찮은 정도인데 그 잠깐을 집중하는 것도 못하고 있어서 큰일이다. 하지만 머신러닝 강의가 더딘만큼 블로그와 About Me의 개발 속도는 어마어마한 것을 보면 확실히 이 세상에 모든 것은 trade-off관계인가 보다.</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/7/">Octopress에 Facebook Comments 추가하기</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-28T01:38:00+09:00" pubdate data-updated="true">Jul 28<span>th</span>, 2013</time>
        
         | <a href="/7/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>원래는 바로 레이아웃 뜯어고친 얘기를 적을 생각이었지만 페북 코멘트로 삽질을 하고나니 이것 부터 기록하는 편이 더 나을 것 같다.. 일단 당연히 Octopress는 정적 html 페이지이니 Octopress자체가 comment를 관리하는 것은 불가능하다. 때문에 iframe으로 만들어진 social plugin이 필요한 것이고.. 사실 Disqus를 사용하면 세팅도 할 필요없이 간단하게 처리가 가능하다. 하지만 Disqus는 여러 단점이 존재하고, 무엇보다 내가 쓸 줄 모른다 -_-; 그리고 한국에서 쓰는 걸 본 적이 없음. 차라리 페북이나 트위터 댓글을 만드는 편이 훨씬 나을 것 같아서 개발 경험이 있는 페이스북 댓글로 가기로 했다.</p>


<p>페이스북 댓글을 만들기 위해서는 먼저 app id가 필요하다. 자신의 <a href="https://developers.facebook.com/apps">App관리 페이지</a>에서 앱을 추가하고 app id만 받아오면 된다. 이 id가 있어야 페이스북 자바스크립트 API를 사용 가능하기 때문에 꼭 만들어줘야한다. (즉, 앱 이름을 제외한 나머지 옵션은 건드릴 필요가 없다)</p>


<p>원래 <a href="https://developers.facebook.com/docs/reference/plugins/comments/">facebook document</a>에서 <a class="tip" title="facebook comment에서 설정할 수 있는 값은 크기와 light, dark뿐">자동 생성한 코드</a>를 이용했기 때문에 id를 전부 하드코딩했었는데 <a href="http://blog.grambo.me.uk/blog/2012/02/20/adding-facebook-comments-to-octopress/">좋은 포스트</a>를 발견해서 새로운 좋은 방법을 알아냈다. 일단 받아온 앱 id를 _config.yml에 추가하자.</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>facebook_app_id = 12341234</span></code></pre></td></tr></table></div></figure>


<p><a href="https://developers.facebook.com/docs/reference/plugins/comments/">위에서 링크한 document</a>를 보면 알 수 있겠지만, body에서 script를 사용하여 API를 사용할 수 있도록 만들어주는 코드가 필요하고, 실제 코멘트를 추가할 위치에 fb_comments라는 div를 생성해야한다. 이게 사실 짱짱 귀찮은데 이유는 Comment를 추가해야하는 곳이 page랑 post 두개이기 때문 -_-; 거기다가 나는 이상하게 조건문이 잘 안먹어서 열이 뻗쳐서 그냥 if문도 날려버렸다. 내 코딩의 문제겠지만 오랫만에 레일즈 스타일로 html고치려니깐 뭔가 답답해서..</p>


<p>아무튼 그렇게 하고나서 <code>source/_include/post/facebook_comment.html</code>이라는 녀석을 만들어서 아래의 코드를 추가해주자</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;div class="fb-comments" data-href="http://SanghyukChun.github.io/7/" data-width="470" data-num-posts="10"&gt;&lt;/div&gt;</span></code></pre></td></tr></table></div></figure>


<p>옵션은 본인이 원하는 대로 고쳐도 된다. 이제 <code>source/_layout/page.html</code>과 <code>source/_layout/post.html</code>을 수정하자</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&#123;&#37; if site.facebook_app_id &#37;&#125;
</span><span class='line'>  &lt;section&gt;
</span><span class='line'>    &lt;h1&gt;Comments&lt;/h1&gt;
</span><span class='line'>    &lt;div id="facebook_comments" aria-live="polite"&gt;
</span><span class='line'>      &#123&#37 include post/facebook_comment.html &#37;&#125;
</span><span class='line'>    &lt;/div&gt;
</span><span class='line'>  &lt;/section&gt;
</span><span class='line'>&#123;&#37; endif &#37;&#125;</span></code></pre></td></tr></table></div></figure>


<p>자 이걸로 끝이다. <a href="http://blog.grambo.me.uk/blog/2012/02/20/adding-facebook-comments-to-octopress/">아까 링크했던 글</a>에서는 head에 meta를 추가해주는데 해도 좋고, 없어도 잘 돌아는간다.</p>


<p></p>

<h6>생길 수 있는 문제들</h6>


<ul>
    <li>나처럼 옵션 잘못 걸어서 아예 Comment section자체가 안생김</li>
    <li>data-href에 http:// 없는 상태로 테스트함 (위와 같이해서 preview 때리면 잘 되야한다)</li>
    <li>app id나 등등에서 오타가 있음 (그런데 은근 고칠게 많아서 의외로 찾기 힘들다)</li>
</ul>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/6/">Octopress 자잘한 세팅 변경 및 Post용 Script 만들기</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-27T20:13:00+09:00" pubdate data-updated="true">Jul 27<span>th</span>, 2013</time>
        
         | <a href="/6/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>일단 자잘한 세팅으로 첫 번째 favicon. favicon이라는 녀석은 사이트에 즐겨찾기를 추가했을 때 옆에 작게 로고처럼 표시되는 녀석인데, default값이 octopress랑 같아서 도저히 작업하면서 신경쓰여서 바꿔버렸다. 이건 정말 간단하다. source/ directory바로 밑에 있는 favicon.png만 다른 파일로 바꿔주고 generate하고 deploy하면 끝</p>


<p>두번 째로 Permalink. 쉽게 생각하면 포스트의 고유 주소값. 내가 티스토리, 워드프레스로 넘어가면서 가장 불만이었던 점이 이 고유 주소값의 default가 포스트 이름이라는 점. 근데 나는 원래 포스트 이름이 꽤 긴편이고 거기다가 주소에 날짜가 들어가면 정말 우아하지 않다고 생각해서 가장 미니멀리즘하게 포스트 순서대로 하는 것을 좋아한다. 그런데 octopress도 기본 값이 년/월/일/제목 이다.. -_- 그래서 간단하게 바꿔줬는데, _config.yml에 있는 permalink를 /:year/:month/:day/:title에서 /:title로 바꿔주고 markdown 파일 이름을 2013-07-25-1.markdown 이런 식으로 바꿔주면 된다. 어차피 앞에 주소는 rake new_post할 때 해주는거니깐 딱히 고민할 이유는 없다.</p>


<p></p>

<p>근데 이렇게 하면 매번 생성할 때 마다 마지막 파일 이름이 뭐였는지 일일이 확인해야해서 굉장히 상당히 엄청 귀찮다. 그래서 아래와 같은 스크립트를 만들었음</p>


<p></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>num=$(ls -l | grep markdown | wc -l)
</span><span class='line'>bundle exec rake new_post["$((num+1))"]</span></code></pre></td></tr></table></div></figure>


<p>그냥 post.sh라고 이름 붙이고 /source/_post directory바로 밑에 두고 ./post.sh만 돌리면 알아서 순서대로 만들어 준다 굳굳</p>

</div>
  
  

<hr>
    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/5/">Script와 함께하는 Bundle Exec~</a></h1>
    
    
      <p class="meta text-right mB50">
        








  


<time datetime="2013-07-27T17:15:00+09:00" pubdate data-updated="true">Jul 27<span>th</span>, 2013</time>
        
         | <a href="/5/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>진짜 rails 개발할 때 제일 귀찮았던 것이 rake를 하려고만 하면 버전이 안맞아서 bundle exec를 붙여줘야 했던 점. 물론 강제로 내가 버전을 낮추면 되지만 왜 굳이 잘 쓰고 있는 rake의 버전을 낮추냐는 마인드로 계속 썼었다. 그게 가능했던 이유는 사실 rails 개발할 때 rake는 생각보다 그렇게 빈번하게 쓰지 않는다. 주로 <code>rails s</code>(혹은 <code>rails server</code>) 아니면 가끔 디버깅 용 <code>rails c</code>(혹은 <code>rails console</code>)을 쓰고는 했는데 이녀석들은 거의 출근해서 실행시키면 거의 퇴근할 때 까지 다시 실행시킬 일 없이 쭉 실행된다 -_-;; 근데 블로깅을 하니깐 이게 죄다 rake다. Rakefile을 바꿔버리는 방법도 있지만 굉장히 귀찮기 때문에 그냥 그런 귀찮은 짓을 하느니.. 뭐 그래서 그냥 일일이 치고 있다 하하..</p>


<p>근데 이것도 한 두번이지.. 게다가 이건 포스트 쓸 때는 물론이고 preview 심지어 deploy까지 죄다 rake를 때려야 한다. 포스트 하나 당 최소 세번 -_-;;; 결국 안되겠다 싶어서 deploy.sh라는 녀석을 만들기로 결정</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>bundle exec rake deploy</span></code></pre></td></tr></table></div></figure>


<p>이게 끝이다. 그리고 deploy할 때마다 이름 묻는게 너무 귀찮아서 (password는 그러려니 한다. 맘에 안들면 ssh키를 쓰면 되는데 귀찮아서 -_-; 근데 조만간 쓰게 될 듯) remote origin의 url을 https에서 ssh로 바꿔버렸다.</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git remote set-url origin git@github.com:SanghyukChun/SanghyukChun.github.io.git</span></code></pre></td></tr></table></div></figure>


<p>음.. 바꾸고 나서 아직 deploy를 안해봤는데 이 포스트가 잘 올라가면 성공이고 안되면 다른 해법을 찾아야 한다 이런.</p>


<p>아무튼 귀찮은 것은 질색이기 때문에 좀 여러 방면에서 편하게 블로깅을 할 수 있는 툴들이나 스크립트를 많이 쓰게 될 것 같은 스멜~</p>


<hr>


<p>&#8212; 추가</p>


<p>아 ssh로 바꾸기는 해놨는데 ssh키가 등록이 안되어있어서 결국 도로묵이었다. <a href="https://help.github.com/articles/generating-ssh-keys">https://help.github.com/articles/generating-ssh-keys</a>보고 순서대로 따라서 하니깐 잘 등록 완료. 이제 deploy만 하면 된다~</p>


<p>&#8212; 또 추가</p>


<p>아 범인을 발견했다. octopress에서 github pages에 대해서는 _deploy 밑에 따로 프로젝트를 관리하는데 나는 그걸 모르고 octopress의 url만 열심히 고치고 있었다 ㅋㅋㅋ blog_directory/_deploy/.git/config 를 고쳐야 한다. 즉, 다시 말해서 위에서 언급한</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git remote set-url origin git@github.com:SanghyukChun/SanghyukChun.github.io.git</span></code></pre></td></tr></table></div></figure>


<p>요놈은 root가 아니라 _deploy에서 실행시켜야 한다는 의미!</p>

</div>
  
  

<hr>
    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/7/">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<!--
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/85/">2015년 02월 27일 새벽 5시 반</a>
      </li>
    
      <li class="post">
        <a href="/82/">블로그에 Disqus 설치</a>
      </li>
    
      <li class="post">
        <a href="/81/">맥 요세미티 업데이트 이후 Homebrew 문제점 Troubleshooting</a>
      </li>
    
      <li class="post">
        <a href="/80/">Gitlab을 깔자</a>
      </li>
    
      <li class="post">
        <a href="/79/">새로운 Front Framework Webplate에 대한 소견</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/SanghyukChun">@SanghyukChun</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'SanghyukChun',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>
//&#8211;>
    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Sanghyuk Chun -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sanghyukchun';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=182012898639519&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
